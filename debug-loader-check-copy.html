<!DOCTYPE html>
<html>
<head>
    <title>æ¨¡å—åŠ è½½æ£€æŸ¥ - esptool-js å¤åˆ¶ç‰ˆæœ¬</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>æ¨¡å—åŠ è½½æ£€æŸ¥</h1>
    
    <div id="results"></div>

    <!-- åŠ è½½ä¾èµ– -->
    <script src="web_serial/downloaders/base-downloader.js"></script>
    <script src="web_serial/esp-protocol-reuse.js"></script>
    <script src="web_serial/downloaders/esp32-simple-downloader.js"></script>

    <script>
        function checkModule(name, obj) {
            const resultsDiv = document.getElementById('results');
            const statusDiv = document.createElement('div');
            
            if (obj !== undefined) {
                statusDiv.className = 'status success';
                statusDiv.innerHTML = `âœ… <strong>${name}</strong>: å·²åŠ è½½ (${typeof obj})`;
                if (typeof obj === 'object' && obj !== null) {
                    statusDiv.innerHTML += ` - å±æ€§: ${Object.keys(obj).length}ä¸ª`;
                }
            } else {
                statusDiv.className = 'status error';
                statusDiv.innerHTML = `âŒ <strong>${name}</strong>: æœªå®šä¹‰`;
            }
            
            resultsDiv.appendChild(statusDiv);
        }

        window.onload = function() {
            console.log('å¼€å§‹æ£€æŸ¥æ¨¡å—åŠ è½½çŠ¶æ€...');
            
            // æ£€æŸ¥å„ä¸ªæ¨¡å—
            checkModule('BaseDownloader', window.BaseDownloader);
            checkModule('ESPProtocolReuse', window.ESPProtocolReuse);
            checkModule('ESP32SimpleDownloader', window.ESP32SimpleDownloader);
            
            // æµ‹è¯•èƒ½å¦å®ä¾‹åŒ–
            try {
                if (window.ESP32SimpleDownloader && window.BaseDownloader) {
                    const resultsDiv = document.getElementById('results');
                    const testDiv = document.createElement('div');
                    testDiv.className = 'status info';
                    testDiv.innerHTML = 'ğŸ’¡ <strong>å®ä¾‹åŒ–æµ‹è¯•</strong>: ESP32SimpleDownloader ç±»å¯ä»¥è®¿é—®';
                    resultsDiv.appendChild(testDiv);
                }
            } catch (error) {
                const resultsDiv = document.getElementById('results');
                const errorDiv = document.createElement('div');
                errorDiv.className = 'status error';
                errorDiv.innerHTML = `âŒ <strong>å®ä¾‹åŒ–æµ‹è¯•å¤±è´¥</strong>: ${error.message}`;
                resultsDiv.appendChild(errorDiv);
            }
            
            console.log('æ¨¡å—æ£€æŸ¥å®Œæˆ');
        };
    </script>
</body>
</html> 