<!DOCTYPE html>
<html>
<head>
    <title>测试类加载</title>
</head>
<body>
    <h1>测试T5类加载</h1>
    <div id="result"></div>

    <!-- 按顺序加载脚本 -->
    <script src="downloaders/shared/protocols/base-protocol.js"></script>
    <script src="downloaders/shared/configs/flash-config-base.js"></script>
    <script src="downloaders/t5/protocols/t5-protocols.js"></script>
    <script src="downloaders/t5/configs/t5-flash-config.js"></script>

    <script>
        function testClassLoading() {
            const result = document.getElementById('result');
            let output = '';

            // 测试基础类
            output += `BaseProtocol: ${typeof window.BaseProtocol}<br>`;
            output += `BaseBootRomProtocol: ${typeof window.BaseBootRomProtocol}<br>`;
            output += `BaseBootRomFlashProtocol: ${typeof window.BaseBootRomFlashProtocol}<br>`;
            output += `FlashConfigBase: ${typeof window.FlashConfigBase}<br>`;

            // 测试T5协议类
            output += `LinkCheckProtocol: ${typeof window.LinkCheckProtocol}<br>`;
            output += `GetChipIdProtocol: ${typeof window.GetChipIdProtocol}<br>`;
            output += `T5FlashConfig: ${typeof window.T5FlashConfig}<br>`;

            // 测试实例化
            try {
                const linkCheck = new window.LinkCheckProtocol();
                output += `LinkCheckProtocol实例化: ✅<br>`;
            } catch (e) {
                output += `LinkCheckProtocol实例化: ❌ ${e.message}<br>`;
            }

            try {
                const flashConfig = new window.T5FlashConfig();
                output += `T5FlashConfig实例化: ✅<br>`;
            } catch (e) {
                output += `T5FlashConfig实例化: ❌ ${e.message}<br>`;
            }

            result.innerHTML = output;
        }

        // 页面加载完成后测试
        window.addEventListener('load', testClassLoading);
    </script>
</body>
</html>