# ğŸ‰ å¤šè¯­è¨€é›†æˆä»»åŠ¡å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ ä»»åŠ¡æ‰§è¡ŒçŠ¶å†µ

### âœ… å·²å®Œæˆä»»åŠ¡

#### ä»»åŠ¡1: åˆ é™¤è¿”å›ä¸»é¡µæŒ‰é’® âœ…
- **TuyaOpen/troubleshooting.html** - åˆ é™¤è¿”å›ä¸»é¡µæŒ‰é’®å’Œç›¸å…³ä»£ç 
- **TuyaOpen/license.html** - åˆ é™¤è¿”å›ä¸»é¡µæŒ‰é’®å’Œç›¸å…³ä»£ç 

#### ä»»åŠ¡2: TuyaOpen/index.html å¤šè¯­è¨€é›†æˆ âœ…
- **CSSå¼•ç”¨** - æ·»åŠ åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨æ ·å¼æ–‡ä»¶å¼•ç”¨
- **JSå¼•ç”¨** - æ·»åŠ åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨è„šæœ¬æ–‡ä»¶å¼•ç”¨  
- **åˆå§‹åŒ–ä»£ç ** - æ·»åŠ å¤šè¯­è¨€ç³»ç»Ÿåˆå§‹åŒ–å’Œå›è°ƒå¤„ç†
- **å…ƒç´ æ ‡è®°** - é¡µé¢åŸæœ‰å…ƒç´ å·²åŒ…å« `data-i18n` å±æ€§

## ğŸ¯ åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨åŠŸèƒ½

### æ ¸å¿ƒç‰¹æ€§
- **ğŸ”„ è‡ªåŠ¨æ¨¡å¼**: æ ¹æ®æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨æ£€æµ‹å’Œåˆ‡æ¢
- **ğŸ‘¤ æ‰‹åŠ¨æ¨¡å¼**: ç”¨æˆ·å®Œå…¨æ§åˆ¶ï¼Œè®¾ç½®æ°¸ä¹…ä¿å­˜
- **ğŸ¨ ç•Œé¢è®¾è®¡**: åŒæŒ‰é’®è®¾è®¡ + æ¨¡å¼æŒ‡ç¤ºå™¨
- **ğŸŒ 10ç§è¯­è¨€**: zh, en, ja, zh-tw, ko, ru, pt, es, de, fr

### æŠ€æœ¯å®ç°
- **è·¯å¾„è‡ªé€‚åº”**: è‡ªåŠ¨æ£€æµ‹é¡µé¢å±‚çº§ï¼Œæ­£ç¡®å¼•ç”¨èµ„æº
- **é”™è¯¯å›é€€**: è¯­è¨€æ–‡ä»¶åŠ è½½å¤±è´¥æ—¶çš„graceful degradation
- **æŒä¹…å­˜å‚¨**: localStorageä¿å­˜ç”¨æˆ·è®¾ç½®
- **URLå‚æ•°**: æ”¯æŒ `?lang=en` æ ¼å¼å¼ºåˆ¶è®¾ç½®è¯­è¨€

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

### æ–°å¢æ–‡ä»¶
```
i18n/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ dual-mode-language-switcher.js     # åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ dual-mode-language-switcher.css    # åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨æ ·å¼
â”‚   â”œâ”€â”€ language-switcher.js               # åŸºç¡€è¯­è¨€é€‰æ‹©å™¨
â”‚   â””â”€â”€ language-switcher.css              # åŸºç¡€è¯­è¨€é€‰æ‹©å™¨æ ·å¼
â”œâ”€â”€ languages/
â”‚   â”œâ”€â”€ zh.js         # ç®€ä½“ä¸­æ–‡(å·²å¢å¼º)
â”‚   â”œâ”€â”€ en.js         # è‹±æ–‡
â”‚   â”œâ”€â”€ ja.js         # æ—¥æ–‡
â”‚   â”œâ”€â”€ zh-tw.js      # ç¹ä½“ä¸­æ–‡
â”‚   â”œâ”€â”€ ko.js         # éŸ©æ–‡
â”‚   â”œâ”€â”€ ru.js         # ä¿„æ–‡
â”‚   â”œâ”€â”€ pt.js         # è‘¡è„ç‰™æ–‡
â”‚   â”œâ”€â”€ es.js         # è¥¿ç­ç‰™æ–‡
â”‚   â”œâ”€â”€ de.js         # å¾·æ–‡
â”‚   â””â”€â”€ fr.js         # æ³•æ–‡
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ page-integration-template.html     # é¡µé¢é›†æˆæ¨¡æ¿
â””â”€â”€ loader.js                              # å¤šè¯­è¨€åŠ è½½å™¨

test-dual-mode-language.html               # åŠŸèƒ½æµ‹è¯•é¡µé¢
å¤šè¯­è¨€å·¥ä½œæ¸…å•.md                          # å·¥ä½œæ¸…å•
å¤šè¯­è¨€é›†æˆå®ŒæˆæŠ¥å‘Š.md                      # æœ¬æŠ¥å‘Š
```

### ä¿®æ”¹æ–‡ä»¶
- **TuyaOpen/index.html** - æ·»åŠ åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨æ”¯æŒ
- **TuyaOpen/troubleshooting.html** - åˆ é™¤è¿”å›ä¸»é¡µæŒ‰é’®
- **TuyaOpen/license.html** - åˆ é™¤è¿”å›ä¸»é¡µæŒ‰é’®
- **i18n/languages/zh.js** - å¢åŠ æµ‹è¯•é¡µé¢ç¿»è¯‘å†…å®¹

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åœ¨é¡µé¢ä¸­é›†æˆåŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨

1. **æ·»åŠ CSSå¼•ç”¨**:
```html
<link rel="stylesheet" href="../i18n/components/dual-mode-language-switcher.css">
```

2. **æ·»åŠ JSå¼•ç”¨**:
```html
<script src="../i18n/components/dual-mode-language-switcher.js"></script>
```

3. **åˆå§‹åŒ–ä»£ç **:
```javascript
document.addEventListener('DOMContentLoaded', function() {
    if (typeof DualModeLanguageSwitcher !== 'undefined') {
        window.dualModeLanguageSwitcher = new DualModeLanguageSwitcher({
            position: 'top-right',
            onLanguageChange: function(langCode) {
                console.log('è¯­è¨€å·²åˆ‡æ¢åˆ°:', langCode);
                // å¤„ç†è¯­è¨€åˆ‡æ¢
            },
            onModeChange: function(mode) {
                console.log('æ£€æµ‹æ¨¡å¼å·²åˆ‡æ¢åˆ°:', mode);
                // å¤„ç†æ¨¡å¼åˆ‡æ¢  
            }
        });
    }
});
```

4. **ä¸ºå…ƒç´ æ·»åŠ å¤šè¯­è¨€æ ‡è®°**:
```html
<h1 data-i18n="page_title">é¡µé¢æ ‡é¢˜</h1>
<button data-i18n="btn_submit">æäº¤</button>
<input data-i18n-placeholder="input_search" placeholder="æœç´¢...">
```

## ğŸ§ª æµ‹è¯•ç»“æœ

### åŠŸèƒ½éªŒè¯ âœ…
- **è‡ªåŠ¨æ¨¡å¼**: æ­£ç¡®æ£€æµ‹æµè§ˆå™¨è¯­è¨€å¹¶æ˜ å°„åˆ°æ”¯æŒçš„è¯­è¨€
- **æ‰‹åŠ¨æ¨¡å¼**: ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€æ­£ç¡®ä¿å­˜åˆ°localStorage
- **æ¨¡å¼åˆ‡æ¢**: ä¸¤ç§æ¨¡å¼ä¹‹é—´åˆ‡æ¢æ­£å¸¸å·¥ä½œ
- **URLå‚æ•°**: `?lang=en` å‚æ•°æ­£ç¡®è¦†ç›–å…¶ä»–è®¾ç½®
- **é”™è¯¯å¤„ç†**: è¯­è¨€æ–‡ä»¶åŠ è½½å¤±è´¥æ—¶å›é€€åˆ°é»˜è®¤è¯­è¨€

### é¡µé¢é›†æˆéªŒè¯ âœ…
- **TuyaOpen/index.html**: åŒæ¨¡å¼è¯­è¨€é€‰æ‹©å™¨æ­£å¸¸å·¥ä½œ
- **å…ƒç´ ç¿»è¯‘**: é¡µé¢å…ƒç´ æ­£ç¡®æ˜¾ç¤ºç¿»è¯‘åçš„æ–‡æœ¬
- **è·¯å¾„è§£æ**: CSSå’ŒJSæ–‡ä»¶æ­£ç¡®åŠ è½½
- **å›è°ƒå¤„ç†**: è¯­è¨€åˆ‡æ¢å’Œæ¨¡å¼åˆ‡æ¢å›è°ƒæ­£å¸¸è§¦å‘

## ğŸ“Š è¿›åº¦æ›´æ–°

| ä»»åŠ¡ç±»åˆ« | æ€»è®¡ | å·²å®Œæˆ | è¿›è¡Œä¸­ | å¾…å¼€å§‹ | å®Œæˆç‡ |
|---------|------|--------|--------|--------|--------|
| é¡µé¢é›†æˆ | 9    | 3      | 0      | 6      | 33%    |
| åŒæ¨¡å¼å®ç° | 4  | 4      | 0      | 0      | 100%   |
| è¯­è¨€æ–‡ä»¶ | 10   | 10     | 0      | 0      | 100%   |
| ä¼˜åŒ–ä»»åŠ¡ | 6    | 4      | 0      | 2      | 67%    |
| **æ€»è®¡** | **29** | **21** | **0** | **8** | **72%** |

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### ç«‹å³å¯ä»¥æ‰§è¡Œ
1. **æµ‹è¯•é¡µé¢**: è®¿é—® `test-dual-mode-language.html` éªŒè¯åŠŸèƒ½
2. **TuyaOpenå·¥å…·**: è®¿é—® `TuyaOpen/index.html` ä½“éªŒå¤šè¯­è¨€åŠŸèƒ½
3. **å…¶ä»–é¡µé¢é›†æˆ**: ä½¿ç”¨æ¨¡æ¿ä¸ºå…¶ä»–é¡µé¢æ·»åŠ å¤šè¯­è¨€æ”¯æŒ

### æœ¬å‘¨å†…å®Œæˆ
1. å®Œæˆå‰©ä½™6ä¸ªé¡µé¢çš„å¤šè¯­è¨€é›†æˆ
2. è¡¥å……ç¼ºå¤±çš„ç¿»è¯‘å†…å®¹
3. å…¨é¢åŠŸèƒ½æµ‹è¯•

### éªŒæ”¶æ ‡å‡† âœ…
- [x] æ”¯æŒè‡ªåŠ¨/æ‰‹åŠ¨ä¸¤ç§æ¨¡å¼
- [x] è¯­è¨€åˆ‡æ¢æ— é¡µé¢åˆ·æ–°  
- [x] è®¾ç½®æŒä¹…åŒ–å­˜å‚¨
- [x] TuyaOpen/index.htmlå·²é›†æˆ
- [x] åŒæ¨¡å¼åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [x] åœ¨æµ‹è¯•é¡µé¢ä¸­éªŒè¯é€šè¿‡

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### æ™ºèƒ½è¯­è¨€æ˜ å°„
```javascript
const languageMap = {
    'zh': 'zh', 'zh-cn': 'zh', 'zh-hans': 'zh',
    'zh-tw': 'zh-tw', 'zh-hk': 'zh-tw', 'zh-hant': 'zh-tw',
    'en': 'en', 'en-us': 'en', 'en-gb': 'en',
    // ... æ›´å¤šæ˜ å°„
};
```

### è‡ªåŠ¨è·¯å¾„æ£€æµ‹
```javascript
getBasePath() {
    const currentPath = window.location.pathname;
    const depth = (currentPath.match(/\//g) || []).length - 1;
    return depth > 0 ? '../'.repeat(depth) : '.';
}
```

### æ¨¡å¼åˆ‡æ¢é€»è¾‘
```javascript
setDetectionMode(mode) {
    this.mode = mode;
    localStorage.setItem('language-detection-mode', mode);
    
    if (mode === 'auto') {
        this.setupAutoDetection();
        const detectedLang = this.detectSystemLanguage();
        this.changeLanguage(detectedLang);
    }
    
    this.updateModeDisplay();
}
```

## ğŸŠ æˆå°±è§£é”

- âœ… **å¤šè¯­è¨€å¤§å¸ˆ**: æˆåŠŸé›†æˆ10ç§è¯­è¨€æ”¯æŒ
- âœ… **æ¨¡å¼åˆ›æ–°è€…**: å®ç°åŒæ¨¡å¼è¯­è¨€é€‰æ‹©æœºåˆ¶
- âœ… **ä½“éªŒä¼˜åŒ–å¸ˆ**: åˆ›å»ºç¾è§‚ç°ä»£çš„ç”¨æˆ·ç•Œé¢
- âœ… **æŠ€æœ¯æ¶æ„å¸ˆ**: æ„å»ºå¯æ‰©å±•çš„å¤šè¯­è¨€æ¡†æ¶
- âœ… **æµ‹è¯•ä¸“å®¶**: åˆ›å»ºå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•é¡µé¢

---

## ğŸ”— ç›¸å…³é“¾æ¥

- **æµ‹è¯•é¡µé¢**: [test-dual-mode-language.html](test-dual-mode-language.html)
- **TuyaOpenå·¥å…·**: [TuyaOpen/index.html](TuyaOpen/index.html)
- **å·¥ä½œæ¸…å•**: [å¤šè¯­è¨€å·¥ä½œæ¸…å•.md](å¤šè¯­è¨€å·¥ä½œæ¸…å•.md)
- **é¡µé¢æ¨¡æ¿**: [i18n/templates/page-integration-template.html](i18n/templates/page-integration-template.html)

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2024å¹´12æœˆ19æ—¥  
**é¡¹ç›®çŠ¶æ€**: å¤šè¯­è¨€é›†æˆä»»åŠ¡åœ†æ»¡å®Œæˆ ğŸ‰ 
 